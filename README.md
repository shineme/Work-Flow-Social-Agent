# 小红书自动化工作流设计器

一个基于 Vue 3 + TypeScript 的可视化工作流设计器，用于设计和执行小红书自动化任务流程。

## 技术栈

- Vue 3
- TypeScript
- Vue Flow (流程图引擎)
- Element Plus (UI组件库)
- Vite (构建工具)

## 主要功能

### 1. 模块化设计
- 支持多种类型的功能模块
  - 基础模块：开始节点、结束节点等
  - 控制流模块：条件判断、循环、合并等
  - 数据处理模块：数据转换、过滤等
  - AI处理模块：图片分析、文本生成等
  - 内容生成模块：文本编辑、图片生成等
  - 工具模块：延时、API调用等

### 2. 可视化编辑
- 拖拽式模块添加
- 可视化连线
- 节点属性配置面板
- 分组管理
- 画布缩放和平移

### 3. 智能连接
- 自动类型检查
- 端口兼容性验证
- 循环检测
- 动态连接提示

### 4. 工作流管理
- 保存/加载工作流
- 导入/导出功能
- 工作流验证
- 实时错误提示

## 安装和运行

1. 安装依赖
```bash
npm install
```

2. 开发环境运行
```bash
npm run dev
```

3. 构建生产版本
```bash
npm run build
```

## 使用指南

### 基本操作

1. **添加模块**
   - 从左侧模块面板拖拽模块到画布
   - 双击画布空白处添加开始节点

2. **连接模块**
   - 从一个模块的端口拖动到另一个模块的端口
   - 从端口拖动到空白处可以选择新建模块
   - 系统会自动检查端口类型兼容性

3. **配置模块**
   - 点击模块在右侧面板配置属性
   - 支持变量引用其他模块的输出
   - 必填属性会有明显提示

4. **管理工作流**
   - 使用顶部工具栏进行常用操作
   - 支持画布缩放和自适应
   - 可以创建节点分组
   - 支持导入导出工作流

### 快捷键

- `Delete`: 删除选中的节点或连线
- `Shift + Click`: 多选节点
- `双击节点`: 编辑节点标题
- `双击画布`: 创建开始节点

## 主题定制

项目使用 CSS 变量进行主题配置，主要变量包括：

```css
:root {
  --bg-primary: #1e1e2e;    // 主背景色
  --bg-secondary: #252535;   // 次背景色
  --bg-tertiary: #313244;    // 三级背景色
  --text-primary: #cdd6f4;   // 主文本色
  --text-secondary: #a6adc8; // 次文本色
  --accent-primary: #89b4fa; // 主强调色
  --border-color: #45475a;   // 边框色
  --node-selected: #cba6f7;  // 节点选中色
  // ... 更多颜色变量
}
```

## 模块开发指南

### 模块定义结构

```typescript
interface Module {
  id: string;           // 模块唯一标识
  name: string;         // 模块名称
  type: string;         // 模块类型
  category: string;     // 模块分类
  description: string;  // 模块描述
  properties: Record<string, ModuleProperty>; // 属性配置
  inputs?: Port[];      // 输入端口
  outputs?: Port[];     // 输出端口
}
```

### 添加新模块

1. 在 `moduleRegistry.json` 中添加模块定义
2. 实现模块的执行逻辑
3. 注册模块到系统中

## 注意事项

1. 每个工作流必须有且仅有一个开始节点
2. 注意检查端口类型的兼容性
3. 避免创建循环连接
4. 建议定期保存工作流
5. 大型工作流建议使用分组管理

## 后续规划

- [ ] 支持更多类型的模块
- [ ] 添加工作流调试功能
- [ ] 支持模块模板
- [ ] 优化移动端体验
- [ ] 添加更多主题
- [ ] 支持工作流版本管理
- [ ] 添加数据统计功能
- [ ] 优化性能 